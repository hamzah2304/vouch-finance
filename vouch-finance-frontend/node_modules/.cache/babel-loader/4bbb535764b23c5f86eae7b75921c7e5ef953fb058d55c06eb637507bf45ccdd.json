{"ast":null,"code":"var _jsxFileName = \"/Users/hamzahmahmood/Downloads/ETHDenver/vouch-finance/vouch-finance-frontend/src/features/sdk/Lend/components/supply/CheckingEA.tsx\",\n  _s = $RefreshSig$();\nimport { Box, css, useTheme } from '@mui/material';\nimport { useWeb3React } from '@web3-react/core';\nimport React, { useState } from 'react';\nimport { ApproveLenderIcon } from '../../../../../components/icons';\nimport { useAppDispatch } from '../../../../../hooks/useRedux';\nimport EAService from '../../../../../services/EAService';\nimport { LoadingModal } from '../../../components';\nimport { BottomButton } from '../../../components/BottomButton';\nimport { WrapperModal } from '../../../components/WrapperModal';\nimport { setSupplyError, setSupplyNextStep } from '../../store/lend.reducers';\nimport { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nexport function CheckingEA(_ref) {\n  _s();\n  let {\n    poolInfo,\n    handleApprove\n  } = _ref;\n  const theme = useTheme();\n  const dispatch = useAppDispatch();\n  const {\n    account,\n    chainId\n  } = useWeb3React();\n  const [loading, setLoading] = useState(false);\n  const styles = {\n    iconWrapper: css`\n      ${theme.cssMixins.rowCentered};\n      margin-top: 30px;\n    `,\n    description: css`\n      ${theme.cssMixins.rowCentered};\n      margin-top: 50px;\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      color: #a8a1b2;\n    `\n  };\n  const approveLender = async () => {\n    if (account) {\n      try {\n        setLoading(true);\n        const payload = {\n          poolAddress: poolInfo.pool,\n          lenderWalletAddress: account\n        };\n        await EAService.approveLender(payload, chainId);\n        handleApprove();\n        setLoading(false);\n        dispatch(setSupplyNextStep());\n      } catch (e) {\n        const error = e;\n        setLoading(false);\n        dispatch(setSupplyError(error.message));\n      }\n    }\n  };\n  if (!loading) {\n    return _jsxs(WrapperModal, {\n      title: \"Lender Approval\",\n      subTitle: \"This pool requires lender approval\",\n      children: [_jsx(Box, {\n        css: styles.iconWrapper,\n        children: _jsx(ApproveLenderIcon, {})\n      }), _jsx(Box, {\n        css: styles.description\n      }), _jsx(BottomButton, {\n        variant: \"contained\",\n        onClick: approveLender,\n        children: \"GET APPROVED\"\n      })]\n    });\n  }\n  return _jsx(LoadingModal, {\n    title: \"Approval Pending\",\n    description: \"Waiting for approval confirmation...\"\n  });\n}\n_s(CheckingEA, \"jYLIxkUKCqrWw4fwhML62Rz+V0c=\", false, function () {\n  return [useTheme, useAppDispatch, useWeb3React];\n});\n_c = CheckingEA;\nvar _c;\n$RefreshReg$(_c, \"CheckingEA\");","map":{"version":3,"names":["Box","css","useTheme","useWeb3React","React","useState","ApproveLenderIcon","useAppDispatch","EAService","LoadingModal","BottomButton","WrapperModal","setSupplyError","setSupplyNextStep","CheckingEA","poolInfo","handleApprove","theme","dispatch","account","chainId","loading","setLoading","styles","iconWrapper","cssMixins","rowCentered","description","approveLender","payload","poolAddress","pool","lenderWalletAddress","e","error","message"],"sources":["/Users/hamzahmahmood/Downloads/ETHDenver/vouch-finance/vouch-finance-frontend/src/features/sdk/Lend/components/supply/CheckingEA.tsx"],"sourcesContent":["import { Box, css, useTheme } from '@mui/material'\nimport { useWeb3React } from '@web3-react/core'\nimport React, { useState } from 'react'\n\nimport { ApproveLenderIcon } from '../../../../../components/icons'\nimport { useAppDispatch } from '../../../../../hooks/useRedux'\nimport EAService from '../../../../../services/EAService'\nimport { PoolInfoType } from '../../../../../utils/pool'\nimport { CustomError } from '../../../../../utilTypes'\nimport { LoadingModal } from '../../../components'\nimport { BottomButton } from '../../../components/BottomButton'\nimport { WrapperModal } from '../../../components/WrapperModal'\nimport { setSupplyError, setSupplyNextStep } from '../../store/lend.reducers'\n\ntype Props = {\n  poolInfo: PoolInfoType\n  handleApprove: () => void\n}\n\nexport function CheckingEA({\n  poolInfo,\n  handleApprove,\n}: Props): React.ReactElement | null {\n  const theme = useTheme()\n  const dispatch = useAppDispatch()\n  const { account, chainId } = useWeb3React()\n  const [loading, setLoading] = useState(false)\n\n  const styles = {\n    iconWrapper: css`\n      ${theme.cssMixins.rowCentered};\n      margin-top: 30px;\n    `,\n    description: css`\n      ${theme.cssMixins.rowCentered};\n      margin-top: 50px;\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      color: #a8a1b2;\n    `,\n  }\n\n  const approveLender = async () => {\n    if (account) {\n      try {\n        setLoading(true)\n        const payload = {\n          poolAddress: poolInfo.pool,\n          lenderWalletAddress: account,\n        }\n        await EAService.approveLender(payload, chainId!)\n        handleApprove()\n        setLoading(false)\n        dispatch(setSupplyNextStep())\n      } catch (e: unknown) {\n        const error = e as CustomError\n        setLoading(false)\n        dispatch(setSupplyError(error.message))\n      }\n    }\n  }\n\n  if (!loading) {\n    return (\n      <WrapperModal\n        title='Lender Approval'\n        subTitle='This pool requires lender approval'\n      >\n        <Box css={styles.iconWrapper}>\n          <ApproveLenderIcon />\n        </Box>\n        <Box css={styles.description} />\n        <BottomButton variant='contained' onClick={approveLender}>\n          GET APPROVED\n        </BottomButton>\n      </WrapperModal>\n    )\n  }\n\n  return (\n    <LoadingModal\n      title='Approval Pending'\n      description='Waiting for approval confirmation...'\n    />\n  )\n}\n"],"mappings":";;AAAA,SAASA,GAAG,EAAEC,GAAG,EAAEC,QAAQ,QAAQ,eAAe;AAClD,SAASC,YAAY,QAAQ,kBAAkB;AAC/C,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAEvC,SAASC,iBAAiB,QAAQ,iCAAiC;AACnE,SAASC,cAAc,QAAQ,+BAA+B;AAC9D,OAAOC,SAAS,MAAM,mCAAmC;AAGzD,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,YAAY,QAAQ,kCAAkC;AAC/D,SAASC,YAAY,QAAQ,kCAAkC;AAC/D,SAASC,cAAc,EAAEC,iBAAiB,QAAQ,2BAA2B;AAAA;AAAA;AAO7E,OAAO,SAASC,UAAU,OAGW;EAAA;EAAA,IAHV;IACzBC,QAAQ;IACRC;EACK,CAAC;EACN,MAAMC,KAAK,GAAGf,QAAQ,EAAE;EACxB,MAAMgB,QAAQ,GAAGX,cAAc,EAAE;EACjC,MAAM;IAAEY,OAAO;IAAEC;EAAQ,CAAC,GAAGjB,YAAY,EAAE;EAC3C,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMkB,MAAM,GAAG;IACbC,WAAW,EAAEvB,GAAI;AACrB,QAAQgB,KAAK,CAACQ,SAAS,CAACC,WAAY;AACpC;AACA,KAAK;IACDC,WAAW,EAAE1B,GAAI;AACrB,QAAQgB,KAAK,CAACQ,SAAS,CAACC,WAAY;AACpC;AACA;AACA;AACA;AACA;EACE,CAAC;EAED,MAAME,aAAa,GAAG,YAAY;IAChC,IAAIT,OAAO,EAAE;MACX,IAAI;QACFG,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMO,OAAO,GAAG;UACdC,WAAW,EAAEf,QAAQ,CAACgB,IAAI;UAC1BC,mBAAmB,EAAEb;QACvB,CAAC;QACD,MAAMX,SAAS,CAACoB,aAAa,CAACC,OAAO,EAAET,OAAO,CAAE;QAChDJ,aAAa,EAAE;QACfM,UAAU,CAAC,KAAK,CAAC;QACjBJ,QAAQ,CAACL,iBAAiB,EAAE,CAAC;MAC/B,CAAC,CAAC,OAAOoB,CAAU,EAAE;QACnB,MAAMC,KAAK,GAAGD,CAAgB;QAC9BX,UAAU,CAAC,KAAK,CAAC;QACjBJ,QAAQ,CAACN,cAAc,CAACsB,KAAK,CAACC,OAAO,CAAC,CAAC;MACzC;IACF;EACF,CAAC;EAED,IAAI,CAACd,OAAO,EAAE;IACZ,OACE,MAAC,YAAY;MACX,KAAK,EAAC,iBAAiB;MACvB,QAAQ,EAAC,oCAAoC;MAAA,WAE7C,KAAC,GAAG;QAAC,GAAG,EAAEE,MAAM,CAACC,WAAY;QAAA,UAC3B,KAAC,iBAAiB;MAAG,EACjB,EACN,KAAC,GAAG;QAAC,GAAG,EAAED,MAAM,CAACI;MAAY,EAAG,EAChC,KAAC,YAAY;QAAC,OAAO,EAAC,WAAW;QAAC,OAAO,EAAEC,aAAc;QAAA,UAAC;MAE1D,EAAe;IAAA,EACF;EAEnB;EAEA,OACE,KAAC,YAAY;IACX,KAAK,EAAC,kBAAkB;IACxB,WAAW,EAAC;EAAsC,EAClD;AAEN;AAAC,GAlEed,UAAU;EAAA,QAIVZ,QAAQ,EACLK,cAAc,EACFJ,YAAY;AAAA;AAAA,KAN3BW,UAAU;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}