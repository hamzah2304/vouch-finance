{"ast":null,"code":"import { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { WINDOW } from '../helpers.js';\n\n/** HttpContext integration collects information about HTTP request headers */\nclass HttpContext {\n  constructor() {\n    HttpContext.prototype.__init.call(this);\n  }\n  /**\n   * @inheritDoc\n   */\n  static __initStatic() {\n    this.id = 'HttpContext';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  __init() {\n    this.name = HttpContext.id;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setupOnce() {\n    addGlobalEventProcessor(event => {\n      if (getCurrentHub().getIntegration(HttpContext)) {\n        // if none of the information we want exists, don't bother\n        if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n          return event;\n        }\n\n        // grab as much info as exists and add it to the event\n        const url = event.request && event.request.url || WINDOW.location && WINDOW.location.href;\n        const {\n          referrer\n        } = WINDOW.document || {};\n        const {\n          userAgent\n        } = WINDOW.navigator || {};\n        const headers = {\n          ...(event.request && event.request.headers),\n          ...(referrer && {\n            Referer: referrer\n          }),\n          ...(userAgent && {\n            'User-Agent': userAgent\n          })\n        };\n        const request = {\n          ...event.request,\n          ...(url && {\n            url\n          }),\n          headers\n        };\n        return {\n          ...event,\n          request\n        };\n      }\n      return event;\n    });\n  }\n}\nHttpContext.__initStatic();\nexport { HttpContext };\n//# sourceMappingURL=httpcontext.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}