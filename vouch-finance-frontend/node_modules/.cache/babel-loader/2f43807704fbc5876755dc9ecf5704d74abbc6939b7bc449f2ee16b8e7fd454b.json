{"ast":null,"code":"var _jsxFileName = \"/Users/hamzahmahmood/Downloads/ETHDenver/huma-workshop/huma-demo-dapp/src/features/sdk/CreditLine/components/payment/Payback.tsx\",\n  _s = $RefreshSig$();\nimport { useWeb3React } from '@web3-react/core';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useCLPoolAllowance } from '../../../../../hooks/useCLPoolContract';\nimport { useAppDispatch } from '../../../../../hooks/useRedux';\nimport { toBigNumber, upScale } from '../../../../../utils/number';\nimport { ChooseAmountModal } from '../../../components';\nimport { setCLPaymentAmount, setCLPaymentStep } from '../../store/creditLine.reducers';\nimport { CL_PAYMENT_STEP } from '../../store/creditLine.store';\nimport { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nexport function Payback(_ref) {\n  _s();\n  let {\n    payoffAmount,\n    totalDueAmount,\n    poolInfo\n  } = _ref;\n  const dispatch = useAppDispatch();\n  const {\n    account\n  } = useWeb3React();\n  const {\n    symbol,\n    decimals\n  } = poolInfo.poolUnderlyingToken;\n  const [currentAmount, setCurrentAmount] = useState(0);\n  const {\n    allowance\n  } = useCLPoolAllowance(poolInfo.poolName, account);\n  useEffect(() => {\n    setCurrentAmount(totalDueAmount);\n    dispatch(setCLPaymentAmount(totalDueAmount));\n  }, [dispatch, totalDueAmount]);\n  const handleChangeAmount = useCallback(newAmount => {\n    setCurrentAmount(newAmount);\n    dispatch(setCLPaymentAmount(newAmount));\n  }, [dispatch]);\n  const handleAction = useCallback(() => {\n    const payAmount = upScale(currentAmount, decimals);\n    const step = toBigNumber(payAmount).gt(allowance) ? CL_PAYMENT_STEP.ApproveAllowance : CL_PAYMENT_STEP.TransferMoney;\n    dispatch(setCLPaymentStep(step));\n  }, [allowance, currentAmount, decimals, dispatch]);\n  return _jsx(ChooseAmountModal, {\n    title: \"Pay\",\n    description1: \"Choose amount\",\n    sliderMax: payoffAmount,\n    currentAmount: currentAmount,\n    tokenSymbol: symbol,\n    handleChangeAmount: handleChangeAmount,\n    handleAction: handleAction,\n    actionText: \"pay\",\n    payoffAmount: payoffAmount,\n    hideTerms: true\n  });\n}\n_s(Payback, \"9wqAcBvT3giHpKIiNNuxf3n5R2Y=\", false, function () {\n  return [useAppDispatch, useWeb3React, useCLPoolAllowance];\n});\n_c = Payback;\nvar _c;\n$RefreshReg$(_c, \"Payback\");","map":{"version":3,"names":["useWeb3React","React","useCallback","useEffect","useState","useCLPoolAllowance","useAppDispatch","toBigNumber","upScale","ChooseAmountModal","setCLPaymentAmount","setCLPaymentStep","CL_PAYMENT_STEP","Payback","payoffAmount","totalDueAmount","poolInfo","dispatch","account","symbol","decimals","poolUnderlyingToken","currentAmount","setCurrentAmount","allowance","poolName","handleChangeAmount","newAmount","handleAction","payAmount","step","gt","ApproveAllowance","TransferMoney"],"sources":["/Users/hamzahmahmood/Downloads/ETHDenver/huma-workshop/huma-demo-dapp/src/features/sdk/CreditLine/components/payment/Payback.tsx"],"sourcesContent":["import { useWeb3React } from '@web3-react/core'\nimport React, { useCallback, useEffect, useState } from 'react'\n\nimport { useCLPoolAllowance } from '../../../../../hooks/useCLPoolContract'\nimport { useAppDispatch } from '../../../../../hooks/useRedux'\nimport { toBigNumber, upScale } from '../../../../../utils/number'\nimport { PoolInfoType } from '../../../../../utils/pool'\nimport { ChooseAmountModal } from '../../../components'\nimport {\n  setCLPaymentAmount,\n  setCLPaymentStep,\n} from '../../store/creditLine.reducers'\nimport { CL_PAYMENT_STEP } from '../../store/creditLine.store'\n\ntype Props = {\n  payoffAmount: number\n  totalDueAmount: number\n  poolInfo: PoolInfoType\n}\n\nexport function Payback({\n  payoffAmount,\n  totalDueAmount,\n  poolInfo,\n}: Props): React.ReactElement | null {\n  const dispatch = useAppDispatch()\n  const { account } = useWeb3React()\n  const { symbol, decimals } = poolInfo.poolUnderlyingToken\n  const [currentAmount, setCurrentAmount] = useState(0)\n  const { allowance } = useCLPoolAllowance(poolInfo.poolName, account)\n\n  useEffect(() => {\n    setCurrentAmount(totalDueAmount)\n    dispatch(setCLPaymentAmount(totalDueAmount))\n  }, [dispatch, totalDueAmount])\n\n  const handleChangeAmount = useCallback(\n    (newAmount: number) => {\n      setCurrentAmount(newAmount)\n      dispatch(setCLPaymentAmount(newAmount))\n    },\n    [dispatch],\n  )\n\n  const handleAction = useCallback(() => {\n    const payAmount = upScale(currentAmount, decimals)\n    const step = toBigNumber(payAmount).gt(allowance)\n      ? CL_PAYMENT_STEP.ApproveAllowance\n      : CL_PAYMENT_STEP.TransferMoney\n    dispatch(setCLPaymentStep(step))\n  }, [allowance, currentAmount, decimals, dispatch])\n\n  return (\n    <ChooseAmountModal\n      title='Pay'\n      description1='Choose amount'\n      sliderMax={payoffAmount}\n      currentAmount={currentAmount}\n      tokenSymbol={symbol}\n      handleChangeAmount={handleChangeAmount}\n      handleAction={handleAction}\n      actionText='pay'\n      payoffAmount={payoffAmount}\n      hideTerms\n    />\n  )\n}\n"],"mappings":";;AAAA,SAASA,YAAY,QAAQ,kBAAkB;AAC/C,OAAOC,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE/D,SAASC,kBAAkB,QAAQ,wCAAwC;AAC3E,SAASC,cAAc,QAAQ,+BAA+B;AAC9D,SAASC,WAAW,EAAEC,OAAO,QAAQ,6BAA6B;AAElE,SAASC,iBAAiB,QAAQ,qBAAqB;AACvD,SACEC,kBAAkB,EAClBC,gBAAgB,QACX,iCAAiC;AACxC,SAASC,eAAe,QAAQ,8BAA8B;AAAA;AAQ9D,OAAO,SAASC,OAAO,OAIc;EAAA;EAAA,IAJb;IACtBC,YAAY;IACZC,cAAc;IACdC;EACK,CAAC;EACN,MAAMC,QAAQ,GAAGX,cAAc,EAAE;EACjC,MAAM;IAAEY;EAAQ,CAAC,GAAGlB,YAAY,EAAE;EAClC,MAAM;IAAEmB,MAAM;IAAEC;EAAS,CAAC,GAAGJ,QAAQ,CAACK,mBAAmB;EACzD,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGnB,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM;IAAEoB;EAAU,CAAC,GAAGnB,kBAAkB,CAACW,QAAQ,CAACS,QAAQ,EAAEP,OAAO,CAAC;EAEpEf,SAAS,CAAC,MAAM;IACdoB,gBAAgB,CAACR,cAAc,CAAC;IAChCE,QAAQ,CAACP,kBAAkB,CAACK,cAAc,CAAC,CAAC;EAC9C,CAAC,EAAE,CAACE,QAAQ,EAAEF,cAAc,CAAC,CAAC;EAE9B,MAAMW,kBAAkB,GAAGxB,WAAW,CACnCyB,SAAiB,IAAK;IACrBJ,gBAAgB,CAACI,SAAS,CAAC;IAC3BV,QAAQ,CAACP,kBAAkB,CAACiB,SAAS,CAAC,CAAC;EACzC,CAAC,EACD,CAACV,QAAQ,CAAC,CACX;EAED,MAAMW,YAAY,GAAG1B,WAAW,CAAC,MAAM;IACrC,MAAM2B,SAAS,GAAGrB,OAAO,CAACc,aAAa,EAAEF,QAAQ,CAAC;IAClD,MAAMU,IAAI,GAAGvB,WAAW,CAACsB,SAAS,CAAC,CAACE,EAAE,CAACP,SAAS,CAAC,GAC7CZ,eAAe,CAACoB,gBAAgB,GAChCpB,eAAe,CAACqB,aAAa;IACjChB,QAAQ,CAACN,gBAAgB,CAACmB,IAAI,CAAC,CAAC;EAClC,CAAC,EAAE,CAACN,SAAS,EAAEF,aAAa,EAAEF,QAAQ,EAAEH,QAAQ,CAAC,CAAC;EAElD,OACE,KAAC,iBAAiB;IAChB,KAAK,EAAC,KAAK;IACX,YAAY,EAAC,eAAe;IAC5B,SAAS,EAAEH,YAAa;IACxB,aAAa,EAAEQ,aAAc;IAC7B,WAAW,EAAEH,MAAO;IACpB,kBAAkB,EAAEO,kBAAmB;IACvC,YAAY,EAAEE,YAAa;IAC3B,UAAU,EAAC,KAAK;IAChB,YAAY,EAAEd,YAAa;IAC3B,SAAS;EAAA,EACT;AAEN;AAAC,GA9CeD,OAAO;EAAA,QAKJP,cAAc,EACXN,YAAY,EAGVK,kBAAkB;AAAA;AAAA,KAT1BQ,OAAO;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}