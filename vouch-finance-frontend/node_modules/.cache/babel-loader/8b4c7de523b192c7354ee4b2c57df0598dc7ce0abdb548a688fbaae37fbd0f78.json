{"ast":null,"code":"var _jsxFileName = \"/Users/hamzahmahmood/Downloads/ETHDenver/huma-workshop/huma-demo-dapp/src/features/sdk/CreditLine/components/borrow/CheckingEA.tsx\",\n  _s = $RefreshSig$();\nimport { Box, Button, css, Typography, useTheme } from '@mui/material';\nimport { useWeb3React } from '@web3-react/core';\nimport React, { useEffect, useState } from 'react';\nimport { CheckCircleIcon, CheckGreenIcon } from '../../../../../components/icons';\nimport spinner from '../../../../../components/icons/spinner.gif';\nimport { useCLCreditRecord } from '../../../../../hooks/useCLPoolContract';\nimport { useAppDispatch } from '../../../../../hooks/useRedux';\nimport EAService from '../../../../../services/EAService';\nimport { EARejectMessage, EARejectReason } from '../../../../../utils/const';\nimport { setCLBorrowError, setCLBorrowNextStep } from '../../store/creditLine.reducers';\nimport { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nexport function CheckingEA(_ref) {\n  _s();\n  let {\n    poolInfo,\n    handleApprove\n  } = _ref;\n  const theme = useTheme();\n  const dispatch = useAppDispatch();\n  const {\n    account,\n    chainId\n  } = useWeb3React();\n  const [status, setStatus] = useState('checking');\n  const {\n    checkIsApproved\n  } = useCLCreditRecord(poolInfo.poolName, account);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const payload = {\n          poolAddress: poolInfo.pool,\n          borrowerWalletAddress: account,\n          receivableAddress: poolInfo.assetAddress\n        };\n        await EAService.approve(payload, chainId, checkIsApproved);\n        setStatus('success');\n        handleApprove();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      } catch (e) {\n        var _e$cause;\n        if ((_e$cause = e.cause) !== null && _e$cause !== void 0 && _e$cause.applicationRejected) {\n          dispatch(setCLBorrowError({\n            errorMessage: EARejectMessage,\n            errorReason: EARejectReason\n          }));\n        } else {\n          const error = e;\n          dispatch(setCLBorrowError({\n            errorMessage: error.message\n          }));\n        }\n      }\n    };\n    fetchData();\n  }, [account, chainId, checkIsApproved, dispatch, handleApprove, poolInfo.assetAddress, poolInfo.pool]);\n  const styles = {\n    wrapper: css`\n      height: 518px;\n      position: relative;\n    `,\n    header: css`\n      ${theme.cssMixins.rowHCentered};\n      margin-top: -5px;\n    `,\n    content: css`\n      ${theme.cssMixins.rowHCentered};\n      margin-top: 30px;\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      line-height: 24px;\n      color: #49505b;\n      margin-bottom: 65px;\n    `,\n    checkWrapper: css`\n      ${theme.cssMixins.rowVCentered}\n      width: 100%;\n      height: 72px;\n      background: #f9f8fa;\n      border-radius: 4px;\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      color: #49505b;\n    `,\n    checkIcon: css`\n      ${theme.cssMixins.rowCentered}\n      width: 105px;\n      height: 100%;\n\n      & > img {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    `,\n    congratsWrapper: css`\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      padding: 0 16px;\n      ${theme.cssMixins.rowVCentered}\n      margin-top: 60px;\n      height: 52px;\n      background: linear-gradient(\n          0deg,\n          rgba(255, 255, 255, 0.9),\n          rgba(255, 255, 255, 0.9)\n        ),\n        #2e7d32;\n      border-radius: 4px;\n    `,\n    bottom: css`\n      & .MuiButtonBase-root {\n        width: 100%;\n        position: absolute;\n        bottom: 0;\n      }\n    `\n  };\n  const goToNextStep = () => {\n    dispatch(setCLBorrowNextStep());\n  };\n  return _jsxs(Box, {\n    css: styles.wrapper,\n    children: [_jsx(Typography, {\n      variant: \"h6\",\n      css: styles.header,\n      children: \"Borrow\"\n    }), _jsx(Box, {\n      css: styles.content,\n      children: \"Looks like it\\u2019s your first time around here. Let\\u2019s see if you qualify...\"\n    }), _jsxs(Box, {\n      css: styles.checkWrapper,\n      sx: {\n        marginBottom: '16px'\n      },\n      children: [_jsxs(Box, {\n        css: styles.checkIcon,\n        children: [status === 'checking' && _jsx(\"img\", {\n          src: spinner,\n          alt: \"loading...\"\n        }), status === 'success' && _jsx(CheckGreenIcon, {})]\n      }), _jsx(Box, {\n        children: \"Checking your income\"\n      })]\n    }), _jsxs(Box, {\n      css: styles.checkWrapper,\n      children: [_jsxs(Box, {\n        css: styles.checkIcon,\n        children: [status === 'checking' && _jsx(\"img\", {\n          src: spinner,\n          alt: \"loading...\"\n        }), status === 'success' && _jsx(CheckGreenIcon, {})]\n      }), _jsx(Box, {\n        children: \"Checking other qualifications\"\n      })]\n    }), status === 'success' && _jsxs(_Fragment, {\n      children: [_jsxs(Box, {\n        css: styles.congratsWrapper,\n        children: [_jsx(CheckCircleIcon, {}), _jsx(Box, {\n          sx: {\n            marginLeft: '16px'\n          },\n          children: \"Congrats, you are qualified to borrow\"\n        })]\n      }), _jsx(Box, {\n        css: styles.bottom,\n        children: _jsx(Button, {\n          variant: \"contained\",\n          onClick: goToNextStep,\n          children: \"CONTINUE TO BORROW\"\n        })\n      })]\n    })]\n  });\n}\n_s(CheckingEA, \"71nyubf0bXsR8IEg0vqh9OZUBmk=\", false, function () {\n  return [useTheme, useAppDispatch, useWeb3React, useCLCreditRecord];\n});\n_c = CheckingEA;\nvar _c;\n$RefreshReg$(_c, \"CheckingEA\");","map":{"version":3,"names":["Box","Button","css","Typography","useTheme","useWeb3React","React","useEffect","useState","CheckCircleIcon","CheckGreenIcon","spinner","useCLCreditRecord","useAppDispatch","EAService","EARejectMessage","EARejectReason","setCLBorrowError","setCLBorrowNextStep","CheckingEA","poolInfo","handleApprove","theme","dispatch","account","chainId","status","setStatus","checkIsApproved","poolName","fetchData","payload","poolAddress","pool","borrowerWalletAddress","receivableAddress","assetAddress","approve","e","cause","applicationRejected","errorMessage","errorReason","error","message","styles","wrapper","header","cssMixins","rowHCentered","content","checkWrapper","rowVCentered","checkIcon","rowCentered","congratsWrapper","bottom","goToNextStep","marginBottom","marginLeft"],"sources":["/Users/hamzahmahmood/Downloads/ETHDenver/huma-workshop/huma-demo-dapp/src/features/sdk/CreditLine/components/borrow/CheckingEA.tsx"],"sourcesContent":["import { Box, Button, css, Typography, useTheme } from '@mui/material'\nimport { useWeb3React } from '@web3-react/core'\nimport React, { useEffect, useState } from 'react'\n\nimport {\n  CheckCircleIcon,\n  CheckGreenIcon,\n} from '../../../../../components/icons'\nimport spinner from '../../../../../components/icons/spinner.gif'\nimport { useCLCreditRecord } from '../../../../../hooks/useCLPoolContract'\nimport { useAppDispatch } from '../../../../../hooks/useRedux'\nimport EAService from '../../../../../services/EAService'\nimport { EARejectMessage, EARejectReason } from '../../../../../utils/const'\nimport { PoolInfoType } from '../../../../../utils/pool'\nimport { CustomError } from '../../../../../utilTypes'\nimport {\n  setCLBorrowError,\n  setCLBorrowNextStep,\n} from '../../store/creditLine.reducers'\n\ntype Props = {\n  poolInfo: PoolInfoType\n  handleApprove: () => void\n}\n\nexport function CheckingEA({\n  poolInfo,\n  handleApprove,\n}: Props): React.ReactElement {\n  const theme = useTheme()\n  const dispatch = useAppDispatch()\n  const { account, chainId } = useWeb3React()\n  const [status, setStatus] = useState<'checking' | 'success'>('checking')\n  const { checkIsApproved } = useCLCreditRecord(poolInfo.poolName, account)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const payload = {\n          poolAddress: poolInfo.pool,\n          borrowerWalletAddress: account,\n          receivableAddress: poolInfo.assetAddress,\n        }\n        await EAService.approve(payload, chainId!, checkIsApproved)\n        setStatus('success')\n        handleApprove()\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      } catch (e: any) {\n        if (e.cause?.applicationRejected) {\n          dispatch(\n            setCLBorrowError({\n              errorMessage: EARejectMessage,\n              errorReason: EARejectReason,\n            }),\n          )\n        } else {\n          const error = e as CustomError\n          dispatch(\n            setCLBorrowError({\n              errorMessage: error.message,\n            }),\n          )\n        }\n      }\n    }\n    fetchData()\n  }, [\n    account,\n    chainId,\n    checkIsApproved,\n    dispatch,\n    handleApprove,\n    poolInfo.assetAddress,\n    poolInfo.pool,\n  ])\n\n  const styles = {\n    wrapper: css`\n      height: 518px;\n      position: relative;\n    `,\n    header: css`\n      ${theme.cssMixins.rowHCentered};\n      margin-top: -5px;\n    `,\n    content: css`\n      ${theme.cssMixins.rowHCentered};\n      margin-top: 30px;\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      line-height: 24px;\n      color: #49505b;\n      margin-bottom: 65px;\n    `,\n    checkWrapper: css`\n      ${theme.cssMixins.rowVCentered}\n      width: 100%;\n      height: 72px;\n      background: #f9f8fa;\n      border-radius: 4px;\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      color: #49505b;\n    `,\n    checkIcon: css`\n      ${theme.cssMixins.rowCentered}\n      width: 105px;\n      height: 100%;\n\n      & > img {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    `,\n    congratsWrapper: css`\n      font-family: 'Uni-Neue-Regular';\n      font-size: 16px;\n      padding: 0 16px;\n      ${theme.cssMixins.rowVCentered}\n      margin-top: 60px;\n      height: 52px;\n      background: linear-gradient(\n          0deg,\n          rgba(255, 255, 255, 0.9),\n          rgba(255, 255, 255, 0.9)\n        ),\n        #2e7d32;\n      border-radius: 4px;\n    `,\n    bottom: css`\n      & .MuiButtonBase-root {\n        width: 100%;\n        position: absolute;\n        bottom: 0;\n      }\n    `,\n  }\n\n  const goToNextStep = () => {\n    dispatch(setCLBorrowNextStep())\n  }\n\n  return (\n    <Box css={styles.wrapper}>\n      <Typography variant='h6' css={styles.header}>\n        Borrow\n      </Typography>\n      <Box css={styles.content}>\n        Looks like it’s your first time around here. Let’s see if you qualify...\n      </Box>\n      <Box css={styles.checkWrapper} sx={{ marginBottom: '16px' }}>\n        <Box css={styles.checkIcon}>\n          {status === 'checking' && <img src={spinner} alt='loading...' />}\n          {status === 'success' && <CheckGreenIcon />}\n        </Box>\n        <Box>Checking your income</Box>\n      </Box>\n      <Box css={styles.checkWrapper}>\n        <Box css={styles.checkIcon}>\n          {status === 'checking' && <img src={spinner} alt='loading...' />}\n          {status === 'success' && <CheckGreenIcon />}\n        </Box>\n        <Box>Checking other qualifications</Box>\n      </Box>\n      {status === 'success' && (\n        <>\n          <Box css={styles.congratsWrapper}>\n            <CheckCircleIcon />\n            <Box sx={{ marginLeft: '16px' }}>\n              Congrats, you are qualified to borrow\n            </Box>\n          </Box>\n          <Box css={styles.bottom}>\n            <Button variant='contained' onClick={goToNextStep}>\n              CONTINUE TO BORROW\n            </Button>\n          </Box>\n        </>\n      )}\n    </Box>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}